CREATE TABLE Emp (
    Emp_no NUMBER PRIMARY KEY,
    Emp_name VARCHAR2(100),
    Emp_salary NUMBER(10,2)
);

CREATE TABLE Tracking (
    Emp_no NUMBER,
    Emp_salary NUMBER(10,2)
);
CREATE OR REPLACE TRIGGER trg_salary_check
AFTER INSERT OR UPDATE OR DELETE
ON Emp
FOR EACH ROW
BEGIN
    -- Check for INSERT event
    IF INSERTING THEN
        IF :NEW.Emp_salary < 50000 THEN
            INSERT INTO Tracking (Emp_no, Emp_salary)
            VALUES (:NEW.Emp_no, :NEW.Emp_salary);
            DBMS_OUTPUT.PUT_LINE('Trigger Fired: Salary inserted below 50000 for Emp_no ' || :NEW.Emp_no);
        END IF;
    END IF;

    -- Check for UPDATE event
    IF UPDATING THEN
        IF :NEW.Emp_salary < 50000 THEN
            INSERT INTO Tracking (Emp_no, Emp_salary)
            VALUES (:NEW.Emp_no, :NEW.Emp_salary);
            DBMS_OUTPUT.PUT_LINE('Trigger Fired: Salary updated below 50000 for Emp_no ' || :NEW.Emp_no);
        END IF;
    END IF;
END;
/
SET SERVEROUTPUT ON;

-- Insert Employees
INSERT INTO Emp VALUES (1, 'Rohit Sharma', 60000);
INSERT INTO Emp VALUES (2, 'Ananya Singh', 45000);  -- Below 50000 â†’ Trigger fires
INSERT INTO Emp VALUES (3, 'Vikram Mehta', 70000);
COMMIT;

UPDATE Emp SET Emp_salary = 40000 WHERE Emp_no = 3;

SELECT * FROM Tracking;
